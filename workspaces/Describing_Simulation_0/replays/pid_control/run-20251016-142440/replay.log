# PID control replay started at 2025-10-16T21:24:40Z

## Start simulation
$ curl -sS -i -X POST http://localhost:3000/simulation/start -H Content-Type:\ application/json --data-binary \{\}
HTTP/1.1 200 OK
content-type: application/json
Date: Thu, 16 Oct 2025 21:24:40 GMT
Connection: keep-alive
Keep-Alive: timeout=5
Content-Length: 60

{"acknowledgement":{"messageId":"msg-1","status":"success"}}

## Check status after start
$ curl -sS http://localhost:3000/status
{"simulation":{"running":true,"tick":0},"evaluation":{"running":false,"tick":0}}

## Sample simulation stream (5s timeout)
$ curl -sS --max-time 5 -N http://localhost:3000/simulation/stream
: stream started at 2025-10-16T21:24:40.844Z

event: simulation
data: {"tick":1,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":1}}]}]}

event: simulation
data: {"tick":2,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":2}}]}]}

event: simulation
data: {"tick":3,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":3}}]}]}

event: simulation
data: {"tick":4,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":4}}]}]}

event: simulation
data: {"tick":5,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":5}}]}]}

event: simulation
data: {"tick":6,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":6}}]}]}

event: simulation
data: {"tick":7,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":7}}]}]}

event: simulation
data: {"tick":8,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":8}}]}]}

event: simulation
data: {"tick":9,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":9}}]}]}

event: simulation
data: {"tick":10,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":10}}]}]}

event: simulation
data: {"tick":11,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":11}}]}]}

event: simulation
data: {"tick":12,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":12}}]}]}

event: simulation
data: {"tick":13,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":13}}]}]}

event: simulation
data: {"tick":14,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":14}}]}]}

event: simulation
data: {"tick":15,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":15}}]}]}

event: simulation
data: {"tick":16,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":16}}]}]}

event: simulation
data: {"tick":17,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":17}}]}]}

event: simulation
data: {"tick":18,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":18}}]}]}

event: simulation
data: {"tick":19,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":19}}]}]}

event: simulation
data: {"tick":20,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":20}}]}]}

event: simulation
data: {"tick":21,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":21}}]}]}

event: simulation
data: {"tick":22,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":22}}]}]}

event: simulation
data: {"tick":23,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":23}}]}]}

event: simulation
data: {"tick":24,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":24}}]}]}

event: simulation
data: {"tick":25,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":25}}]}]}

event: simulation
data: {"tick":26,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":26}}]}]}

event: simulation
data: {"tick":27,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":27}}]}]}

event: simulation
data: {"tick":28,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":28}}]}]}

event: simulation
data: {"tick":29,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":29}}]}]}

event: simulation
data: {"tick":30,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":30}}]}]}

event: simulation
data: {"tick":31,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":31}}]}]}

event: simulation
data: {"tick":32,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":32}}]}]}

event: simulation
data: {"tick":33,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":33}}]}]}

event: simulation
data: {"tick":34,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":34}}]}]}

event: simulation
data: {"tick":35,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":35}}]}]}

event: simulation
data: {"tick":36,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":36}}]}]}

event: simulation
data: {"tick":37,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":37}}]}]}

event: simulation
data: {"tick":38,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":38}}]}]}

event: simulation
data: {"tick":39,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":39}}]}]}

event: simulation
data: {"tick":40,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":40}}]}]}

event: simulation
data: {"tick":41,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":41}}]}]}

event: simulation
data: {"tick":42,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":42}}]}]}

event: simulation
data: {"tick":43,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":43}}]}]}

event: simulation
data: {"tick":44,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":44}}]}]}

event: simulation
data: {"tick":45,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":45}}]}]}

event: simulation
data: {"tick":46,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":46}}]}]}

event: simulation
data: {"tick":47,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":47}}]}]}

event: simulation
data: {"tick":48,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":48}}]}]}

event: simulation
data: {"tick":49,"entities":[{"id":1,"components":[{"type":"core.time","data":{"tick":49}}]}]}


# exit status: 28

## Upload PID control plugin
$ curl -sS -i -X POST http://localhost:3000/codebase/plugin -H Content-Type:\ application/json --data-binary $'{\n  "path": "simulation/systems/PIDControlSystem.js",\n  "content": "export class PIDControlSystem { constructor({kp = 1, ki = 0, kd = 0} = {}) { this.kp = kp; this.ki = ki; this.kd = kd; this.integral = 0; this.prevError = 0; } onInit() {} update() {} onDestroy() {} }"\n}'
HTTP/1.1 201 Created
content-type: application/json
Date: Thu, 16 Oct 2025 21:24:45 GMT
Connection: keep-alive
Keep-Alive: timeout=5
Content-Length: 49

{"path":"simulation/systems/PIDControlSystem.js"}

## Attempt to inject PID system
$ curl -sS -i -X POST http://localhost:3000/simulation/system -H Content-Type:\ application/json --data-binary \{\"id\":\"pid\"\,\"module\":\"simulation/systems/PIDControlSystem.js\"\}
HTTP/1.1 200 OK
content-type: application/json
Date: Thu, 16 Oct 2025 21:24:45 GMT
Connection: keep-alive
Keep-Alive: timeout=5
Content-Length: 61

{"acknowledgement":{"messageId":"msg-52","status":"success"}}

## Check status after injection attempt
$ curl -sS http://localhost:3000/status
{"simulation":{"running":true,"tick":50},"evaluation":{"running":false,"tick":0}}

## Stop simulation
$ curl -sS -i -X POST http://localhost:3000/simulation/stop -H Content-Type:\ application/json --data-binary \{\}
HTTP/1.1 200 OK
content-type: application/json
Date: Thu, 16 Oct 2025 21:24:45 GMT
Connection: keep-alive
Keep-Alive: timeout=5
Content-Length: 61

{"acknowledgement":{"messageId":"msg-53","status":"success"}}
# Replay finished at 2025-10-16T21:24:45Z
